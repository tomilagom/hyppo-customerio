<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="Hyppo demos — Hyper Growth Agency for Latin America" />
        <meta name="author" content="Hyppo Demos" />
        <title>Hyppo Demos - Hyper Growth Agency</title>
        <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:500,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,800,800i" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
        <script>
        !function(){var i="cioanalytics", analytics=(window[i]=window[i]||[]);if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.setAttribute('data-global-customerio-analytics-key', i);t.src="https://cdp.customer.io/v1/analytics-js/snippet/" + key + "/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._writeKey=key;analytics._loadOptions=e};analytics.SNIPPET_VERSION="4.15.3";
            analytics.load(
            "0be865e18f0402b04a77",
            {
                "integrations": {
                "Customer.io In-App Plugin": {
                    siteId: "290bacec6d019e2a0284"
                }
                }
            }
            );
            analytics.page();
        }}();
        </script>
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
            <a class="navbar-brand js-scroll-trigger" href="#page-top">
                <span class="d-block d-lg-none">Hyppo Demos</span>
                <span class="d-none d-lg-block"><img class="img-fluid img-profile rounded-circle mx-auto mb-2" src="assets/img/profile.jpg" alt="Hyppo Demos Logo" /></span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#home">Home</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#track-event">Track Event</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#feedback">Identify Event</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#user-info">Current User</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#in-app-message">In-App Message</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="/page-event.html">Page event</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="https://github.com/tomilagom/hyppo-customerio" target="_blank">Github code</a></li>
                </ul>
            </div>
        </nav>
        <!-- Page Content-->
        <div class="container-fluid p-0">
            <!-- Main Content -->
            <section class="resume-section" id="home">
                <div class="resume-section-content">
                    <h1 class="mb-0">Hyppo Demos</h1>
                    <p class="lead mb-5">This is a demo site to test customer.io integration with help of Hyppo.io experts. Empowering Latin American companies to achieve hyper growth through technology and innovation.</p>
                    <p class="lead mb-5">Explore how to integrate Customer.io into your web applications with practical examples and user-friendly features.</p>
                </div>
            </section>
            <section class="resume-section" id="track-event">
                <div class="resume-section-content">
                    <h2 class="mb-5">Start the demo</h2>
                    <h4>Track an event in customer.io when a button is clicked</h2>
                    <button class="btn btn-primary" onclick="cioanalytics.track('class_started', { title: 'How to use Customer.io', progress: '2%', category: 'getting started' });">Track!</button>
                </div>
            </section>
            <section class="resume-section" id="feedback">
                <div class="resume-section-content">
                    <h4>Completing the form we will make an identify event</h2>
                    
                    <form id="feedbackForm" onsubmit="handleFeedbackSubmit(event)">
                        <div class="form-group">
                            <label for="name">Name</label>
                            <input type="text" class="form-control" id="name" name="name" value="Demo" required />
                        </div>
                        <div class="form-group">
                            <label for="email">Email (optional)</label>
                            <input type="email" class="form-control" id="email" name="email" value="demo@hyppo.io" />
                        </div>
                        <div class="form-group">
                            <label for="message">Message</label>
                            <textarea class="form-control" id="message" name="message" rows="3" required>this is a demo message in the form. It could be anything where the user is identified, including a login or signup form</textarea>
                        </div>
                        <button type="button" class="btn btn-primary" onclick="const email = document.getElementById('email').value; const name = document.getElementById('name').value; const message = document.getElementById('message').value; const request = { name, message }; cioanalytics.identify(email, request, (response) => showSuccessModal(request, response));">Submit</button>
                    </form>
                </div>
            </section>
            <section class="resume-section" id="user-info">
                <div class="resume-section-content">
                    <h4>Current Identified User</h4>
                    <button class="btn btn-secondary" onclick="const userId = cioanalytics.user().id(); document.getElementById('user-id').textContent = userId ? `User ID: ${userId}` : 'No user identified.';">Show User ID</button>
                    <button class="btn btn-danger" onclick="cioanalytics.reset(); document.getElementById('user-id').textContent = 'No user identified.';">Logout</button>
                    <p id="user-id">Click the button to see the user ID.</p>
                </div>
            </section>
            <section class="resume-section" id="in-app-message">
                <div class="resume-section-content">
                    <h4>Track an event that will activate an in-app message for the identified user</h4>
                    <p>The in-app message can take some minutes to show-up</p>
                    <button class="btn btn-primary" onclick="cioanalytics.track('in-app', {}, (response) => showSuccessModal({ event: 'in-app' }, response));">Send in-app</button>
                </div>
            </section>
            <footer class="footer text-center">
                <p>Hyppo demos — Hyper Growth Agency for Latin America</p>
            </footer>
        </div>
        <script>
            function handleFeedbackSubmit(event) {
                event.preventDefault();
                const name = document.getElementById('name').value;
                const email = document.getElementById('email').value;
                const message = document.getElementById('message').value;

                // Split the name into first and last name
                const [first_name, ...last_name_parts] = name.split(' ');
                const last_name = last_name_parts.join(' ');

                const request = {
                    email,
                    first_name,
                    last_name,
                    message
                };

                cioanalytics.identify('feedback_form', request, (response) => {
                    showSuccessModal(request, response);
                });
            }

            function showSuccessModal(request, response) {
                // Create the modal container
                const modalContainer = document.createElement('div');
                modalContainer.className = 'modal fade show';
                modalContainer.style.display = 'flex';
                modalContainer.style.justifyContent = 'center';
                modalContainer.style.alignItems = 'center';
                modalContainer.style.position = 'fixed';
                modalContainer.style.top = '0';
                modalContainer.style.left = '0';
                modalContainer.style.width = '100%';
                modalContainer.style.height = '100%';
                modalContainer.style.zIndex = '1050';
                modalContainer.style.backgroundColor = 'rgba(0, 0, 0, 0.5)';
                modalContainer.style.overflow = 'auto';

                // Create the modal content
                const modalContent = document.createElement('div');
                modalContent.style.backgroundColor = 'white';
                modalContent.style.border = '1px solid #ccc';
                modalContent.style.borderRadius = '8px';
                modalContent.style.boxShadow = '0 4px 6px rgba(0, 0, 0, 0.1)';
                modalContent.style.padding = '20px';
                modalContent.style.width = '80%';
                modalContent.style.maxWidth = '800px';
                modalContent.style.maxHeight = '80%';
                modalContent.style.overflowY = 'auto';
                modalContent.style.margin = '20px auto';
                modalContent.style.position = 'relative';

                // Add a close button
                const closeButton = document.createElement('button');
                closeButton.className = 'btn-close';
                closeButton.style.position = 'absolute';
                closeButton.style.top = '10px';
                closeButton.style.right = '10px';
                closeButton.setAttribute('aria-label', 'Close');
                closeButton.onclick = () => modalContainer.remove();

                // Add content to the modal
                modalContent.innerHTML = `
                    <h5 style="text-align: center;">Success!</h5>
                    <p style="text-align: center;">Event tracked successfully. <a href="https://fly.customer.io/workspaces/186015/pipelines/sources/78590/data-in" target="_blank">See the events here</a></p>
                    <h6>Request:</h6>
                    <pre style="background-color: #f8f9fa; padding: 10px; border-radius: 5px; overflow-x: auto;">${JSON.stringify(request, null, 2)}</pre>
                    <h6>Response:</h6>
                    <pre style="background-color: #f8f9fa; padding: 10px; border-radius: 5px; overflow-x: auto;">${JSON.stringify(response, null, 2)}</pre>
                `;

                // Append the close button and modal content to the modal container
                modalContent.appendChild(closeButton);
                modalContainer.appendChild(modalContent);

                // Append the modal to the body
                document.body.appendChild(modalContainer);
            }

            document.addEventListener('DOMContentLoaded', () => {
                const trackButton = document.querySelector('.btn-primary[onclick^="cioanalytics.track"]');
                if (trackButton) {
                    trackButton.onclick = () => {
                        const request = {
                            title: 'How to use Customer.io',
                            progress: '2%',
                            category: 'getting started'
                        };

                        cioanalytics.track('class_started', request, (response) => {
                            showSuccessModal(request, response);
                        });
                    };
                }

                const userIdElement = document.getElementById('user-id');
                const userId = cioanalytics.user().id();
                userIdElement.textContent = userId ? `User ID: ${userId}` : 'No user identified.';
            });
        </script>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
